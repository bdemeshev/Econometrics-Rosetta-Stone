<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Коан 2 Коан о простой линейной регрессии | Розеттский камень</title>
  <meta name="description" content="Сборник коанов для эконометристов, жаждущих просветления." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Коан 2 Коан о простой линейной регрессии | Розеттский камень" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Сборник коанов для эконометристов, жаждущих просветления." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Коан 2 Коан о простой линейной регрессии | Розеттский камень" />
  
  <meta name="twitter:description" content="Сборник коанов для эконометристов, жаждущих просветления." />
  

<meta name="author" content="Пуассон, фея и три мексиканских негодяя" />


<meta name="date" content="2020-01-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="binchoice.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Приветственный коан</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#язык-программирования-r"><i class="fa fa-check"></i><b>1.1</b> Язык программирования R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#инструкция-по-установке-rstudio-для-windows-mac-os"><i class="fa fa-check"></i><b>1.1.1</b> Инструкция по установке RStudio для Windows / Mac OS:</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#начало-работы"><i class="fa fa-check"></i><b>1.1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#настройка-программы-1"><i class="fa fa-check"></i><b>1.1.3</b> Настройка программы</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#язык-программирования-python"><i class="fa fa-check"></i><b>1.2</b> Язык программирования Python</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#установка"><i class="fa fa-check"></i><b>1.2.1</b> Установка</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#начало-работы-1"><i class="fa fa-check"></i><b>1.2.2</b> Начало работы</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#программа-stata"><i class="fa fa-check"></i><b>1.3</b> Программа STATA</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#установка-1"><i class="fa fa-check"></i><b>1.3.1</b> Установка:</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#начало-работы-2"><i class="fa fa-check"></i><b>1.3.2</b> Начало работы:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="simplereg.html"><a href="simplereg.html"><i class="fa fa-check"></i><b>2</b> Коан о простой линейной регрессии</a><ul>
<li class="chapter" data-level="2.1" data-path="simplereg.html"><a href="simplereg.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="binchoice.html"><a href="binchoice.html"><i class="fa fa-check"></i><b>3</b> Модель бинарного выбора</a><ul>
<li class="chapter" data-level="3.1" data-path="binchoice.html"><a href="binchoice.html#r-1"><i class="fa fa-check"></i><b>3.1</b> R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multchoice.html"><a href="multchoice.html"><i class="fa fa-check"></i><b>4</b> Модели множественного выбора</a><ul>
<li class="chapter" data-level="4.1" data-path="multchoice.html"><a href="multchoice.html#r-2"><i class="fa fa-check"></i><b>4.1</b> R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="poisreg.html"><a href="poisreg.html"><i class="fa fa-check"></i><b>5</b> Модели счетных данных</a><ul>
<li class="chapter" data-level="5.1" data-path="poisreg.html"><a href="poisreg.html#r-3"><i class="fa fa-check"></i><b>5.1</b> R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="arma.html"><a href="arma.html"><i class="fa fa-check"></i><b>6</b> ARMA</a><ul>
<li class="chapter" data-level="6.1" data-path="arma.html"><a href="arma.html#r-4"><i class="fa fa-check"></i><b>6.1</b> R</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="paneldata.html"><a href="paneldata.html"><i class="fa fa-check"></i><b>7</b> Коан о панельных данных</a></li>
<li class="chapter" data-level="8" data-path="heterosked.html"><a href="heterosked.html"><i class="fa fa-check"></i><b>8</b> Гетероскедастичность в простой регрессии</a><ul>
<li class="chapter" data-level="8.1" data-path="heterosked.html"><a href="heterosked.html#r-5"><i class="fa fa-check"></i><b>8.1</b> R</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Розеттский камень</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simplereg" class="section level1">
<h1><span class="header-section-number">Коан 2</span> Коан о простой линейной регрессии</h1>
<div id="r" class="section level2">
<h2><span class="header-section-number">2.1</span> R</h2>
<p>Построим простую линейную регрессию в R и проведем несложные тесты.</p>
<p>Загрузим необходимые пакеты.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(tidyverse) <span class="co"># манипуляции с данными и построение графиков</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">library</span>(sjPlot) <span class="co"># красивые графики для линейных моделей</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">library</span>(skimr) <span class="co"># симпатичное summary</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">library</span>(rio) <span class="co"># чтение .dta файлов</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">library</span>(car) <span class="co"># проверка линейных гипотез</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">library</span>(tseries) <span class="co"># тест Харке – Бера</span></a></code></pre></div>
<p>Импортируем данные.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">returns =<span class="st"> </span><span class="kw">import</span>(<span class="st">&quot;../data/02_us_return.dta&quot;</span>)</a></code></pre></div>
<p>Исследуем наш датасет.
Функция <code>skim()</code> позволяет получить красивую и приятную в работе табличку (<code>tibble</code>), содержащую типы переменных и различные описательные статистики.
Для удобства выведем результаты только для переменных <code>MOTOR</code> и <code>rkfree</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">skim</span>(returns) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(skim_variable <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;MOTOR&#39;</span>, <span class="st">&#39;rkfree&#39;</span>)) </a></code></pre></div>
<table>
<caption><span id="tab:skim">Table 2.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">returns</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">2664</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">22</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">MOTOR</td>
<td align="right">2544</td>
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">0.1</td>
<td align="right">-0.33</td>
<td align="right">-0.05</td>
<td align="right">0.02</td>
<td align="right">0.08</td>
<td align="right">0.27</td>
<td align="left">▁▂▇▇▁</td>
</tr>
<tr class="even">
<td align="left">rkfree</td>
<td align="right">2544</td>
<td align="right">0.05</td>
<td align="right">0.01</td>
<td align="right">0.0</td>
<td align="right">0.00</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="left">▂▇▇▂▂</td>
</tr>
</tbody>
</table>
<p>Переименуем столбцы с «неговорящими» названиями :)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">returns =<span class="st"> </span><span class="kw">rename</span>(returns, <span class="dt">n =</span> A, <span class="dt">date =</span> B) </a></code></pre></div>
<p>И уберем строчки, в которых хотя бы один элемент пустой.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">returns=<span class="st"> </span><span class="kw">na.omit</span>(returns)</a></code></pre></div>
<p>Будем верить в CAPM :) (в начале объяснить, что такое capm)
Оценим параметры модели для компании MOTOR. Тогда зависимая переменная - разница доходностей акций MOTOR и безрискового актива (<code>motor_premium</code>), а регрессор - рыночная премия (<code>market_premium</code>).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">returns =<span class="st"> </span><span class="kw">mutate</span>(returns, <span class="dt">motor_premium =</span> MOTOR <span class="op">-</span><span class="st"> </span>RKFREE, <span class="dt">market_premium =</span> MARKET <span class="op">-</span><span class="st"> </span>RKFREE)</a></code></pre></div>
<p>Оценим нашу модель и проверим гипотезу об адекватности регрессии.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">ols =<span class="st"> </span><span class="kw">lm</span>(motor_premium <span class="op">~</span><span class="st"> </span>market_premium, <span class="dt">data =</span> returns)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">summary</span>(ols)</a></code></pre></div>
<pre><code>
Call:
lm(formula = motor_premium ~ market_premium, data = returns)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.168421 -0.059381 -0.003399  0.061373  0.182991 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    0.005253   0.007200   0.730    0.467    
market_premium 0.848150   0.104814   8.092 5.91e-13 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.07844 on 118 degrees of freedom
Multiple R-squared:  0.3569,    Adjusted R-squared:  0.3514 
F-statistic: 65.48 on 1 and 118 DF,  p-value: 5.913e-13</code></pre>
<p>Вызовом одной функции получаем кучу полезных графиков :)
Можем визуально оценить наличие гетероскедастичности, нормальность распределения остатков, наличие выбросов.
Без дополнительных указаний функция построит 4 графика – по одному друг за другом.
Мы для красоты c помощью функции <code>par</code> будем выводить по два графика :)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">plot</span>(ols) </a></code></pre></div>
<p><img src="02-simplereg_files/figure-html/plot-1.png" width="672" /></p>
<p>График <strong>«Residuals vs Fitted»</strong> помогает уловить возможные нелинейные зависимости между регрессором и объясняемой переменной.
В «хорошем» случае мы ждем картинку с остатками, равномерно рассеянными вдоль горизонтальной прямой.
В нашем случае несколько выбиваются наблюдения с отрицательной рыночной премией.</p>
<p>График <strong>«Normal Q – Q»</strong> позволяет визуально оценить нормальность распределения остатков.
Эталоном здесь является пунктирная прямая.
На графике функция распределения остатков нашей модели «похожа» на нормальную :)</p>
<p>График <strong>«Scale – Location»</strong> дает возможность «на глаз» оценить равную дисперсию остатков регресии и проверить наличие гетероскедастичности.
За исключением немногочисленных наблюдений с отрицательной рыночной премией, в нашем случае предположение о гомоскедастичности (одинаковой дисперсии) остатков кажется верным.</p>
<p>График <strong>«Residuals vs Leverage»</strong> помогает выявить «влиятельные наблюдения» с высоким «воздействием» (high leverage).
Это такие наблюдения, которые имеют нетипичные для выборки значения, но исключение которых может значительно повлиять на оценки коэффициентов модели.
На графике они располагаются справа, за границами, обозначенными красной пунктирной линией (расстояние Кука).</p>
<p>Теперь построим <span class="math inline">\(90\%\)</span>-й доверительный интервал для параметров модели.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">confint</span>(ols, <span class="dt">level =</span> <span class="fl">0.9</span>)</a></code></pre></div>
<pre><code>                        5 %       95 %
(Intercept)    -0.006683687 0.01718942
market_premium  0.674382048 1.02191711</code></pre>
<p>И заодно проверим гипотезу о равенстве коэффициента при регрессоре единице.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">linearHypothesis</span>(ols, <span class="kw">c</span>(<span class="st">&quot;market_premium = 1&quot;</span>))</a></code></pre></div>
<pre><code>Linear hypothesis test

Hypothesis:
market_premium = 1

Model 1: restricted model
Model 2: motor_premium ~ market_premium

  Res.Df     RSS Df Sum of Sq      F Pr(&gt;F)
1    119 0.73900                           
2    118 0.72608  1  0.012915 2.0989 0.1501</code></pre>
<p>Видим, что на любом разумном уровне значимости она не отвергается.</p>
<p>Теперь посмотрим на остатки регрессии :) Протестируем их на нормальность с помощью теста Харке – Бера.</p>
<p><span class="math display">\[
H_{0}: S = 0, K = 3,
\]</span>
где S — коэффициент асимметрии (Skewness), K — коэффициент эксцесса (Kurtosis)</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">jarque.bera.test</span>(<span class="kw">resid</span>(ols)) </a></code></pre></div>
<pre><code>
    Jarque Bera Test

data:  resid(ols)
X-squared = 1.7803, df = 2, p-value = 0.4106</code></pre>
<p>И заодно посмотрим на результаты теста Шапиро – Уилка.</p>
<p><span class="math display">\[
H_{0}: \epsilon_{i} \sim  N(\mu,\sigma^2)
\]</span></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">shapiro.test</span>(<span class="kw">resid</span>(ols))</a></code></pre></div>
<pre><code>
    Shapiro-Wilk normality test

data:  resid(ols)
W = 0.99021, p-value = 0.5531</code></pre>
<p>Оба теста указывают на нормальность распределения остатков.</p>
<p>Получим предсказания модели для обучаемой выборки.</p>
<div id="додумать" class="section level4">
<h4><span class="header-section-number">2.1.0.1</span> ДОДУМАТЬ</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">fitval =<span class="st"> </span><span class="kw">fitted</span>(ols)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">fit_vs_real =<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">fitted =</span> fitval, <span class="dt">real =</span> returns<span class="op">$</span>market_premium)</a></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">qplot</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(fitval), <span class="dt">y =</span> returns<span class="op">$</span>market_premium, </a>
<a class="sourceLine" id="cb22-2" data-line-number="2">      <span class="dt">xlab =</span> <span class="st">&quot;Number of observation&quot;</span>, </a>
<a class="sourceLine" id="cb22-3" data-line-number="3">      <span class="dt">ylab =</span> <span class="st">&quot;Value&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">y =</span> fitval, <span class="dt">color =</span> <span class="st">&#39;r&#39;</span>))</a></code></pre></div>
<p><img src="02-simplereg_files/figure-html/fit%20vs%20real-1.png" width="672" /></p>
<p>Выведем прогноз модели по <span class="math inline">\(20\)</span> новым наблюдениям (которые сами же и придумаем).
Будем считать, что новые наблюдения распределены нормально с математическим ожиданием <span class="math inline">\(0.01\)</span> и дисперсией <span class="math inline">\(0.01\)</span>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">7</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">new_data =<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">market_premium =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dt">mean =</span> <span class="fl">0.01</span>, <span class="dt">sd =</span> <span class="fl">0.1</span>)) </a>
<a class="sourceLine" id="cb23-3" data-line-number="3">yhat =<span class="st"> </span><span class="kw">predict</span>(ols, <span class="dt">newdata =</span> new_data, <span class="dt">se =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">yhat<span class="op">$</span>fit</a></code></pre></div>
<pre><code>           1            2            3            4            5 
 0.207727133 -0.087769779 -0.045152029 -0.021234248 -0.068593258 
           6            7            8            9           10 
-0.066609148  0.077187768  0.003814809  0.026682011  0.199477263 </code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="binchoice.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Rosetta_Stone.pdf", "Rosetta_Stone.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
